---
/*
  src/pages/projects.astro
*/
import MainLayout from '../layouts/MainLayout.astro';
import { projects } from '../data/projects';

// Sort projects by year
const sortedProjects = projects.sort((a, b) => Number(b.year) - Number(a.year));
---

<MainLayout title="Projects | Egehan Yamçı">
  
  <header class="page-header">
    <h1>Projects</h1>
    <p class="subtitle">
    A collection of software projects I've developed.
    </p>
  </header>

  <div class="projects-grid">
    {sortedProjects.map((project) => (
      <div class="project-card">
        
        {/* Card header: Year and title */}
        <div class="card-header">
          <span class="project-year">{project.year}</span>
          <h3 class="project-title">{project.title}</h3>
        </div>

        {/* Description */}
        <p class="project-desc">
          {project.detailedDescription || project.description}
        </p>

        {/* Tech stack tags */}
        {project.tags && (
          <div class="tech-stack">
            {project.tags.map(tag => (
              <span class="tech-tag">{tag}</span>
            ))}
          </div>
        )}

        {/* Bottom section: Links */}
        <div class="project-buttons">
          {project.links.map((link) => (
            <a href={link.href} class="project-btn" target={link.href.startsWith('http') ? "_blank" : "_self"}>
              {link.text}
              {link.href.startsWith('http') && <span class="external-icon">↗</span>}
            </a>
          ))}
        </div>

      </div>
    ))}
  </div>

</MainLayout>

<style>
  /* Header styles */
  .page-header {
    margin-bottom: 3rem;
  }

  h1 {
    font-size: 3rem;
    font-weight: 800;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
  }

  .subtitle {
    font-size: 1.2rem;
    color: var(--text-secondary);
    max-width: 600px;
  }

  /* Grid layout */
  .projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
  }

  /* Card design */
  .project-card {
    background-color: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 12px;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    transition: transform 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
    height: 100%;
  }

  .project-card:hover {
    transform: translateY(-4px);
    border-color: var(--accent-color);
    box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.3);
  }

  .card-header {
    margin-bottom: 0.5rem;
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .project-year {
    font-size: 0.85rem;
    font-family: monospace;
    color: var(--accent-color);
    background: var(--hover-bg);
    padding: 2px 6px;
    border-radius: 4px;
  }

  .project-title {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
    width: 100%;
    line-height: 1.3;
  }

  .project-desc {
    font-size: 1rem;
    color: var(--text-secondary);
    margin-bottom: 1.5rem;
    line-height: 1.6;
    flex-grow: 1;
  }

  /* --- TECH STACK TAGS --- */
  .tech-stack {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid var(--border-color);
  }

  .tech-tag {
    font-size: 0.75rem;
    color: var(--text-secondary);
    background-color: var(--hover-bg);
    padding: 0.25rem 0.6rem;
    border-radius: 20px;
    font-weight: 500;
    transition: color 0.2s ease;
  }
  
  /* Make tags more prominent on card hover */
  .project-card:hover .tech-tag {
    color: var(--text-primary);
    background-color: var(--btn-bg);
  }

  /* Buttons */
  .project-buttons {
    display: flex;
    gap: 0.8rem;
    margin-top: auto;
  }

  .project-btn {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    border-bottom: 1px solid transparent;
    padding-bottom: 1px;
    transition: all 0.2s ease;
  }

  .project-btn:hover {
    color: var(--accent-color);
    border-bottom-color: var(--accent-color);
  }

  .external-icon {
    font-size: 0.8em;
    line-height: 1;
  }

  @media (max-width: 768px) {
    h1 { font-size: 2.5rem; }
    .projects-grid { grid-template-columns: 1fr; }
  }
</style>